# 非洲彩票博彩平台 - 管理后台

基于 Django Admin 构建的统一管理后台系统，提供完整的系统管理、用户管理、财务管理、游戏管理、奖励管理等功能。

## 🎯 管理后台概述

管理后台是一个功能强大的Web界面，为平台运营人员提供全面的系统管理工具。通过直观的界面和丰富的功能，管理员可以高效地管理平台的各个方面。

### 🔑 访问方式

- **开发环境**: http://localhost:8000/admin/
- **生产环境**: https://your-domain.com/admin/
- **备用入口**: https://your-domain.com/django-admin/ (原生Django Admin)

### 👥 用户角色

- **超级管理员**: 拥有所有权限，可以管理系统的各个方面
- **运营管理员**: 负责日常运营，用户管理、客服支持
- **财务管理员**: 负责财务审核、交易监控、风险控制
- **游戏管理员**: 负责游戏配置、开奖管理、数据分析
- **安全管理员**: 负责安全监控、风险评估、事件处理

## 🏠 系统仪表板

### 主要功能
- **系统概览**: 实时显示关键业务指标
- **用户统计**: 总用户数、新增用户、活跃用户
- **财务统计**: 总余额、今日存提款、资金流向
- **游戏统计**: 活跃游戏、今日投注、开奖情况
- **VIP分布**: 各等级VIP用户分布图表
- **返水统计**: 今日返水用户数和金额

### 访问路径
```
/admin/dashboard/
```

### 界面特色
- **响应式设计**: 适配桌面和移动设备
- **实时数据**: 自动刷新关键指标
- **图表展示**: 直观的数据可视化
- **快速导航**: 一键跳转到各个管理模块

## 👤 用户管理模块

### 用户管理 (`User`)

#### 主要功能
- **用户列表**: 查看所有注册用户
- **用户详情**: 查看用户完整信息
- **用户编辑**: 修改用户基本信息
- **状态管理**: 激活/冻结用户账户
- **VIP管理**: 手动调整用户VIP等级
- **流水查询**: 查看用户投注流水

#### 列表字段
- 手机号、姓名、邮箱、国家
- VIP等级、总流水、KYC状态
- 账户状态、注册时间

#### 筛选选项
- 国家、VIP等级、KYC状态
- 账户状态、双因子认证
- 注册时间范围

#### 批量操作
- 批量激活/冻结账户
- 批量发送通知
- 批量导出用户数据

### KYC文档管理 (`KYCDocument`)

#### 主要功能
- **文档审核**: 审核用户提交的身份文档
- **状态管理**: 通过/拒绝KYC申请
- **文档查看**: 查看身份证、护照等文档图片
- **OCR结果**: 查看自动识别的文档信息
- **审核记录**: 记录审核人员和审核时间

#### 审核流程
1. 查看用户提交的文档
2. 验证文档真实性和清晰度
3. 核对OCR识别结果
4. 做出通过/拒绝决定
5. 填写审核意见

#### 批量操作
- 批量通过KYC申请
- 批量拒绝KYC申请
- 导出KYC统计报告

### 登录日志 (`LoginLog`)

#### 主要功能
- **登录记录**: 查看所有用户登录记录
- **异常检测**: 识别异常登录行为
- **地理位置**: 显示登录IP的地理位置
- **设备信息**: 记录登录设备和浏览器

#### 安全监控
- 多地登录检测
- 频繁登录失败监控
- 新设备登录提醒
- 异常时间登录检测

## 💰 财务管理模块

### 用户余额管理 (`UserBalance`)

#### 主要功能
- **余额查询**: 查看所有用户余额情况
- **余额调整**: 手动调整用户余额
- **冻结管理**: 冻结/解冻用户资金
- **余额统计**: 平台总资金统计

#### 关键指标
- 总主余额、总奖金余额
- 总冻结资金、可用资金
- 用户余额分布情况

### 交易记录管理 (`Transaction`)

#### 主要功能
- **交易查询**: 查看所有交易记录
- **交易详情**: 查看交易完整信息
- **状态管理**: 手动处理待处理交易
- **异常处理**: 处理异常交易

#### 交易类型
- 存款、提款、投注、中奖
- 退款、奖金、返水

#### 批量操作
- 批量标记交易完成
- 批量标记交易失败
- 导出交易报表

### 银行卡管理 (`BankAccount`)

#### 主要功能
- **银行卡查询**: 查看用户绑定的银行卡
- **验证管理**: 验证银行卡真实性
- **状态管理**: 启用/禁用银行卡
- **默认设置**: 设置用户默认银行卡

#### 验证流程
- 银行卡号验证
- 持卡人姓名验证
- 银行信息确认

### 支付方式管理 (`PaymentMethod`)

#### 主要功能
- **支付配置**: 配置各种支付方式
- **费率设置**: 设置支付手续费
- **限额管理**: 设置最小/最大金额
- **状态控制**: 启用/禁用支付方式

#### 支持的支付方式
- Paystack (尼日利亚)
- Flutterwave (多国支持)
- 银行转账
- 移动支付

## 🎮 游戏管理模块

### 游戏基础管理 (`Game`)

#### 主要功能
- **游戏配置**: 配置游戏基本信息
- **状态管理**: 启用/禁用游戏
- **参数设置**: 设置游戏参数
- **统计查询**: 查看游戏统计数据

### 11选5彩票管理

#### 游戏配置 (`Lottery11x5Game`)
- 每日开奖次数设置
- 开奖时间间隔配置
- 封盘时间设置
- 利润目标配置
- 自动开奖开关

#### 投注管理 (`Lottery11x5Bet`)
- 投注记录查询
- 投注状态管理
- 中奖情况统计
- 异常投注处理

#### 开奖结果管理 (`Lottery11x5Result`)
- 开奖结果查询
- 手动开奖功能
- 开奖数据分析
- 走势图生成

#### 管理操作
- 手动开奖选中期次
- 关闭投注期次
- 导出开奖数据
- 生成走势报告

### 大乐透管理

#### 游戏配置 (`SuperLottoGame`)
- 基础投注金额设置
- 最大倍数限制
- 奖池分配比例
- 各等奖固定奖金

#### 开奖管理 (`SuperLottoDraw`)
- 期次管理
- 奖池管理
- 中奖统计
- 派奖管理

#### 投注管理 (`SuperLottoBet`)
- 投注类型统计
- 中奖等级分析
- 胆拖投注管理
- 倍数投注统计

### 666刮刮乐管理

#### 游戏配置 (`Scratch666Game`)
- 卡片价格设置
- 中奖概率配置
- 奖金倍数设置
- 利润目标控制

#### 卡片管理 (`ScratchCard`)
- 卡片销售统计
- 中奖情况分析
- 卡片状态管理
- 异常卡片处理

#### 统计分析 (`ScratchStatistics`)
- 每日销售统计
- 中奖率分析
- 利润率监控
- 用户偏好分析

### 体育博彩管理

#### 赛事管理 (`SportsEvent`)
- 赛事创建和编辑
- 赛事状态管理
- 赔率设置
- 结果录入

#### 投注管理 (`SportsBet`)
- 投注记录查询
- 投注类型统计
- 结算管理
- 异常投注处理

## 🎁 奖励系统管理

### VIP等级管理 (`VIPLevel`)

#### 主要功能
- **等级配置**: 配置VIP等级要求
- **权益设置**: 设置各等级专享权益
- **返水比例**: 设置返水比例
- **提现特权**: 设置提现限额和手续费

#### 配置项目
- 所需流水金额
- 返水比例
- 每日提现限额
- 提现手续费率
- 月度奖金
- 生日奖金
- 专属服务

### 用户VIP状态管理 (`UserVIPStatus`)

#### 主要功能
- **状态查询**: 查看用户VIP状态
- **升级进度**: 查看升级进度
- **手动调整**: 手动调整用户VIP等级
- **权益使用**: 查看权益使用情况

#### 统计信息
- 总流水、月流水
- 返水总额
- 提现使用情况
- 升级进度显示

### 返水记录管理 (`RebateRecord`)

#### 主要功能
- **返水查询**: 查看所有返水记录
- **状态管理**: 管理返水发放状态
- **手动发放**: 手动发放返水奖励
- **统计分析**: 返水数据统计

#### 返水流程
1. 系统自动计算返水
2. 管理员审核确认
3. 批量发放返水
4. 记录发放状态

### 推荐关系管理 (`ReferralRelation`)

#### 主要功能
- **关系查询**: 查看推荐关系链
- **关系验证**: 验证推荐关系真实性
- **异常处理**: 处理异常推荐关系
- **统计分析**: 推荐数据分析

### 推荐奖励管理 (`ReferralRewardRecord`)

#### 主要功能
- **奖励查询**: 查看推荐奖励记录
- **发放管理**: 管理奖励发放
- **等级配置**: 配置各级奖励比例
- **统计报告**: 推荐奖励统计

## 🛡️ 系统管理模块

### 系统配置管理 (`SystemConfig`)

#### 主要功能
- **配置管理**: 管理系统各项配置
- **分类管理**: 按类型管理配置项
- **批量操作**: 批量启用/禁用配置
- **配置导入导出**: 配置的备份和恢复

#### 配置类型
- 系统配置
- 游戏配置
- 支付配置
- 安全配置
- 通知配置
- 维护配置

### 系统日志管理 (`SystemLog`)

#### 主要功能
- **日志查询**: 查看系统运行日志
- **级别筛选**: 按日志级别筛选
- **模块筛选**: 按模块筛选日志
- **关键词搜索**: 搜索特定日志内容

#### 日志级别
- DEBUG: 调试信息
- INFO: 一般信息
- WARNING: 警告信息
- ERROR: 错误信息
- CRITICAL: 严重错误

### 安全事件管理 (`SecurityEvent`)

#### 主要功能
- **事件查询**: 查看安全事件记录
- **事件处理**: 处理安全事件
- **状态管理**: 管理事件处理状态
- **风险评估**: 评估安全风险等级

#### 事件类型
- 登录失败
- 可疑活动
- 大额交易
- 多账户关联
- IP地址变更
- 设备变更
- KYC欺诈
- 投注异常
- 提款风险
- 系统入侵

#### 处理流程
1. 事件自动检测
2. 风险等级评估
3. 分配处理人员
4. 调查和分析
5. 采取处理措施
6. 记录处理结果

### 性能指标管理 (`PerformanceMetric`)

#### 主要功能
- **指标监控**: 监控系统性能指标
- **阈值设置**: 设置警告和严重阈值
- **趋势分析**: 分析性能趋势
- **告警管理**: 管理性能告警

#### 监控指标
- CPU使用率
- 内存使用率
- 磁盘使用率
- 数据库连接数
- Redis内存使用
- API响应时间
- 错误率

## 📊 系统状态监控

### 访问路径
```
/admin/system-status/
```

### 监控内容

#### 系统性能指标
- CPU、内存、磁盘使用情况
- 数据库连接状态
- Redis缓存状态
- Celery队列状态
- WebSocket服务状态

#### 最近安全事件
- 24小时内的安全事件
- 事件严重程度分类
- 处理状态显示
- 快速处理入口

#### 系统日志
- 最近50条系统日志
- 按级别颜色区分
- 实时滚动显示
- 快速筛选功能

### 自动刷新
- 页面每30秒自动刷新
- 实时监控系统状态
- 异常情况及时发现

## 📈 数据分析和报表

### 用户分析
- 用户注册趋势
- VIP用户分布
- 地区用户分布
- KYC状态分布
- 用户留存率分析

### 财务分析
- 每日交易统计
- 用户余额分布
- VIP等级收入贡献
- 大额交易监控
- 提现成功率分析

### 游戏分析
- 游戏参与度统计
- 最近开奖统计
- 游戏利润率分析
- 热门投注时段
- 用户游戏偏好

### 奖励分析
- 返水统计分析
- 推荐奖励统计
- VIP升级统计
- 奖励发放趋势
- 成本效益分析

## 🔧 管理工具

### 管理命令

#### 系统初始化
```bash
python manage.py init_system --admin-user=admin --admin-password=admin123
```

#### 报表生成
```bash
# 生成日报
python manage.py generate_report --type daily

# 生成周报
python manage.py generate_report --type weekly --date 2024-01-01

# 生成月报并导出
python manage.py generate_report --type monthly --month 2024-01 --export
```

#### 安全扫描
```bash
# 全面安全扫描
python manage.py security_scan --scan-type all

# 用户安全扫描并自动修复
python manage.py security_scan --scan-type users --auto-fix

# 交易安全扫描
python manage.py security_scan --scan-type transactions --days 7
```

#### 数据维护
```bash
# 清理旧数据
python manage.py cleanup_old_data

# 系统数据备份
python manage.py backup_system_data

# 数据库优化
python manage.py optimize_database
```

### 批量操作

#### 用户管理
- 批量激活/冻结用户
- 批量发送通知消息
- 批量调整VIP等级
- 批量导出用户数据

#### 财务管理
- 批量处理提现申请
- 批量标记交易状态
- 批量发放奖励
- 批量导出财务报表

#### 游戏管理
- 批量开奖操作
- 批量关闭期次
- 批量导出游戏数据
- 批量更新游戏配置

## 🔐 权限管理

### 权限分组

#### 超级管理员 (Superuser)
- 所有模块的完全访问权限
- 系统配置修改权限
- 用户权限管理权限
- 敏感操作执行权限

#### 运营管理员 (Operations)
- 用户管理权限
- KYC审核权限
- 客服支持权限
- 基础数据查询权限

#### 财务管理员 (Finance)
- 财务数据查询权限
- 交易审核权限
- 提现处理权限
- 财务报表生成权限

#### 游戏管理员 (Games)
- 游戏配置权限
- 开奖管理权限
- 游戏数据分析权限
- 异常处理权限

#### 安全管理员 (Security)
- 安全事件处理权限
- 系统监控权限
- 风险评估权限
- 安全配置权限

### 权限控制

#### 数据级权限
- 只能查看分配的数据范围
- 敏感数据脱敏显示
- 操作日志完整记录

#### 功能级权限
- 精确到具体功能点
- 支持临时权限授予
- 权限变更审计跟踪

#### 时间级权限
- 支持权限有效期设置
- 自动权限回收机制
- 权限使用情况统计

## 🎨 界面特色

### 响应式设计
- 适配桌面、平板、手机
- 灵活的布局调整
- 触摸友好的交互

### 主题支持
- 明亮主题 (默认)
- 深色主题
- 高对比度主题
- 自定义主题配置

### 多语言支持
- 中文 (简体)
- 英文
- 法文
- 动态语言切换

### 用户体验
- 直观的导航结构
- 快速搜索功能
- 智能筛选选项
- 批量操作支持
- 实时数据更新
- 友好的错误提示

## 🔧 故障排除

### 常见问题

#### 无法访问管理后台
1. 检查用户是否有staff权限
2. 确认URL配置正确
3. 检查防火墙设置
4. 查看Django日志

#### 数据显示异常
1. 检查数据库连接
2. 确认模型定义正确
3. 查看序列化器配置
4. 检查权限设置

#### 性能问题
1. 启用数据库查询优化
2. 配置适当的缓存
3. 优化列表查询
4. 使用分页显示

#### 权限问题
1. 检查用户组配置
2. 确认权限分配
3. 查看权限继承关系
4. 检查自定义权限

### 日志查看

#### Django日志
```bash
tail -f logs/django.log
```

#### 数据库日志
```bash
tail -f /var/log/postgresql/postgresql.log
```

#### Nginx日志
```bash
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

## 📚 使用指南

### 首次登录
1. 使用超级管理员账户登录
2. 修改默认密码
3. 创建其他管理员账户
4. 配置基础系统参数

### 日常运营
1. 查看系统仪表板
2. 处理待审核事项
3. 监控系统状态
4. 处理用户问题

### 定期维护
1. 生成运营报表
2. 执行安全扫描
3. 清理过期数据
4. 备份重要数据

### 应急处理
1. 监控安全事件
2. 处理系统异常
3. 执行紧急操作
4. 记录处理过程

## 🤝 技术支持

如需技术支持，请联系：
- 邮箱: admin@lottery-platform.com
- 电话: +234-xxx-xxxx
- 在线支持: 管理后台内置支持系统

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件